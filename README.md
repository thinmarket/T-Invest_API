# T-Invest API Client

## Установка и запуск

1. Скачиваем все файлы в одну директорию  
2. Получаем в ЛК брокера токен  
3. Запускаем файл `main.py`  
4. В открывшемся приложении вводим токен  

---

## Обзор программы

Программа представляет собой графический интерфейс для работы с API Tinkoff Invest, предоставляющий инструменты для:
- Мониторинга счетов
- Анализа рыночных данных


---

## Основные компоненты программы

### Главное окно (`main.py`)
- Создает основной интерфейс приложения
- Управляет статусом подключения и авторизации
- Координирует работу всех модулей
- Отображает системную информацию и время

### Модуль подключения (`connection_window.py`)
- Обеспечивает авторизацию с помощью API-токена
- Проверяет доступные счета пользователя
- Инициирует загрузку информации о счете после успешной авторизации

### Информация о счете (`account_info_window.py`)
Отображает детальную информацию о выбранном счете:
- Тип и статус счета
- Портфель (акции, облигации, ETF и т.д.)
- Текущие позиции
- Статус пользователя (премиум, квалифицированный инвестор)

Загружает данные асинхронно в отдельном потоке.

### Рыночные данные (`market_data_window.py`)
Основной модуль для работы с биржевыми данными:
- Отображение стакана цен (order book)
- Мониторинг сделок в реальном времени
- Анализ крупных сделок
- Отладка сырых данных

Включает подсистему аналитики (`analytics_window.py`).

### Поиск инструментов (`ticker_window.py`)
- Позволяет добавлять и удалять инструменты для мониторинга
- Отображает текущие цены и объемы
- Имитирует стриминг данных (обновление раз в секунду)

### Стили интерфейса (`styles.py`)
- Определяет цветовую схему и оформление приложения
- Настраивает палитру Qt для темного оформления

---

## Логика работы программы

### Авторизация:
1. Пользователь вводит API-токен
2. Проверяется подключение к API Tinkoff Invest
3. Загружается список доступных счетов

### Загрузка данных:
1. После успешной авторизации загружается информация о счете
2. Становятся доступными инструменты для работы с рыночными данными

### Работа с рыночными данными:
1. Пользователь выбирает площадку и тикер
2. Запускается стриминг рыночных данных:
   - Стакан цен (asks/bids)
   - Информация о сделках
   - Последние цены
3. Данные анализируются и отображаются в таблицах

### Аналитика:
- Фильтрация крупных сделок по объему
- Расчет скорости сделок
- Визуализация активности рынка

### Мониторинг инструментов:
- Пользователь может добавлять интересующие инструменты
- Отслеживать их текущие цены и объемы

---

## Особенности реализации

### Асинхронная загрузка данных:
- Все запросы к API выполняются в отдельных потоках
- Используются сигналы Qt для обновления UI

### Реальный стриминг данных:
- Для рыночных данных используется gRPC стрим Tinkoff API
- Данные обрабатываются и агрегируются в реальном времени

### Модульная архитектура:
- Каждый функциональный блок выделен в отдельный модуль
- Четкое разделение ответственности

### Обработка ошибок:
- Все исключения перехватываются и отображаются пользователю
- Состояние приложения контролируется при ошибках

---

Программа предоставляет удобный интерфейс для работы с инвестиционным API Tinkoff, сочетая функциональность для мониторинга счетов и анализа рыночной информации.
